format 223
"Bitstamp" // Standalone application::Receiver::Bitstamp
  revision 4
  modified_by 6 "petr"
  // class settings
  
  classdiagramsettings member_max_width 0 end
  
  classcompositediagramsettings end
  
  usecasediagramsettings end
  
  sequencediagramsettings end
  
  collaborationdiagramsettings end
  
  objectdiagramsettings end
  
  objectcompositediagramsettings end
  
  componentdiagramsettings
   end
  
  deploymentdiagramsettings
   end
  
  statediagramsettings
   end
  
  activitydiagramsettings
   end
  
  cpp_h_dir "cpp/receiver/bitstamp"
  cpp_src_dir "cpp/receiver/bitstamp"
  cpp_namespace "oberon::receiver::bitstamp"
  classview 267526 "Receiver"
    
    classdiagramsettings member_max_width 0 end
    
    classcompositediagramsettings end
    
    collaborationdiagramsettings end
    
    objectdiagramsettings end
    
    objectcompositediagramsettings end
    
    sequencediagramsettings end
    
    statediagramsettings
     end
    
    
    activitydiagramsettings
     end
    state 260102 "Receiver"
      stereotype "machine"
      statediagram 406406 "Receiver"
	statediagramsettings
	 end
	size A4
      end

      pseudostate 334214 initial ""
	transition 499334 "<transition>"
	  on state_ref 260230 // Receive
	  external 
	end
      end

      state 260230 "Receive"
      end
    end

    class 825350 "Receiver"
      visibility package 
      cpp_decl "${comment}${template}class ${name}${inherit} {
${members}};
${inlines}
"
      java_decl ""
      php_decl ""
      python_2_2 python_decl ""
      idl_decl ""
      explicit_switch_type ""
      mysql_decl ""
      
      ncouples 1
      key "STM generated" value ""
      comment " implement the state machine Receiver"
      class 825478 "AnyState"
	abstract visibility protected 
	cpp_decl "${comment}${template}class ${name}${inherit} {
${members}};
${inlines}
"
	java_decl ""
	php_decl ""
	python_2_2 python_decl ""
	idl_decl ""
	explicit_switch_type ""
	mysql_decl ""
	
	ncouples 1
	key "STM generated" value ""
	comment " Mother class of all the classes representing states"
	operation 1139334 "~AnyState"
	  force_body_gen cpp_virtual public explicit_return_type ""
	  nparams 0
	  cpp_decl "    ${comment}${inline}${virtual}${typeprefix}${name}${(}${)}${volatile}${throw};
"
	  cpp_def "${comment}${inline}${typeprefix}${class}::${name}${(}${)}${volatile}${throw} {
  ${body}}
"
	  
	  
	  
	  
	  ncouples 1
	  key "STM generated" value ""
	end

	operation 1139462 "_upper"
	  abstract force_body_gen cpp_virtual public return_type class_ref 825478 // AnyState
	  nparams 1
	    param inout name "stm" type class_ref 825350 // Receiver
	  cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} * ${name}${(}${t0} &${)}${const}${volatile}${throw}${abstract};
"
	  
	  
	  
	  
	  ncouples 1
	  key "STM generated" value ""
	  comment " return the upper state"
	end

	operation 1139590 "_do"
	  force_body_gen cpp_virtual public explicit_return_type "void"
	  nparams 1
	    param inout name "stm" type class_ref 825350 // Receiver
	  cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} &${)}${const}${volatile}${throw}${abstract};
"
	  cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} &${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	  
	  
	  
	  
	  ncouples 1
	  key "STM generated" value ""
	  comment " perform the 'do activity'"
	end

	operation 1139718 "_doentry"
	  force_body_gen cpp_virtual public explicit_return_type "void"
	  nparams 1
	    param inout name "stm" type class_ref 825350 // Receiver
	  cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} &${)}${const}${volatile}${throw}${abstract};
"
	  cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} &${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	  
	  
	  
	  
	  ncouples 1
	  key "STM generated" value ""
	  comment " performs the 'entry activity'"
	end

	operation 1139846 "_doexit"
	  force_body_gen cpp_virtual public explicit_return_type "void"
	  nparams 1
	    param inout name "stm" type class_ref 825350 // Receiver
	  cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} &${)}${const}${volatile}${throw}${abstract};
"
	  cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} &${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	  
	  
	  
	  
	  ncouples 1
	  key "STM generated" value ""
	  comment " performs the 'exit activity'"
	end

	operation 1140614 "create"
	  force_body_gen cpp_virtual public explicit_return_type "void"
	  nparams 1
	    param inout name "stm" type class_ref 825350 // Receiver
	  cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} &${)}${const}${volatile}${throw}${abstract};
"
	  cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} &${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	  
	  
	  
	  
	  ncouples 1
	  key "STM generated" value ""
	end
      end

      class 825606 "Receiver_State"
	visibility protected 
	cpp_decl "${comment}${template}class ${name}${inherit} {
${members}};
${inlines}
"
	java_decl ""
	php_decl ""
	python_2_2 python_decl ""
	idl_decl ""
	explicit_switch_type ""
	mysql_decl ""
	
	ncouples 1
	key "STM generated" value ""
	comment " implement the state Receiver"
	class 825734 "Receive_State"
	  visibility public 
	  cpp_decl "${comment}${template}class ${name}${inherit} {
${members}};
${inlines}
"
	  java_decl ""
	  php_decl ""
	  python_2_2 python_decl ""
	  idl_decl ""
	  explicit_switch_type ""
	  mysql_decl ""
	  
	  ncouples 1
	  key "STM generated" value ""
	  comment " implement the state Receive"
	  operation 1140102 "~Receive_State"
	    force_body_gen cpp_virtual public explicit_return_type ""
	    nparams 0
	    cpp_decl "    ${comment}${inline}${virtual}${typeprefix}${name}${(}${)}${volatile}${throw};
"
	    cpp_def "${comment}${inline}${typeprefix}${class}::${name}${(}${)}${volatile}${throw} {
  ${body}}
"
	    
	    
	    
	    
	    ncouples 1
	    key "STM generated" value ""
	  end

	  classrelation 928390 // <generalisation>
	    relation 918150 ---|>
	      a public
		cpp default "${type}"
		classrelation_ref 928390 // <generalisation>
	      b parent class_ref 825478 // AnyState
	  end

	  operation 1140870 "_upper"
	    force_body_gen cpp_virtual public return_type class_ref 825478 // AnyState
	    nparams 1
	      param inout name "stm" type class_ref 825350 // Receiver
	    cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} * ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	    cpp_def "${comment}${inline}${typeprefix}${type} * ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	    
	    
	    
	    
	    ncouples 1
	    key "STM generated" value ""
	    comment " returns the state containing the current"
	  end
	end

	operation 1139974 "~Receiver_State"
	  force_body_gen cpp_virtual public explicit_return_type ""
	  nparams 0
	  cpp_decl "    ${comment}${inline}${virtual}${typeprefix}${name}${(}${)}${volatile}${throw};
"
	  cpp_def "${comment}${inline}${typeprefix}${class}::${name}${(}${)}${volatile}${throw} {
  ${body}}
"
	  
	  
	  
	  
	  ncouples 1
	  key "STM generated" value ""
	end

	attribute 743686 "_receive_state"
	  public type class_ref 825734 // Receive_State
	  cpp_decl "    ${comment}${static}${thread_local}${mutable}${volatile}${const}${type} ${name}${value};
"
	  java_decl ""
	  php_decl ""
	  python_decl ""
	  idl_decl ""
	  mysql_decl ""
	  MysqlColumn
	  ncouples 1
	  key "STM generated" value ""
	  comment " memorize the instance of the state Receive, internal"
	end

	classrelation 928262 // <generalisation>
	  relation 918022 ---|>
	    a public
	      cpp default "${type}"
	      classrelation_ref 928262 // <generalisation>
	    b parent class_ref 825478 // AnyState
	end

	operation 1140742 "create"
	  force_body_gen cpp_virtual public explicit_return_type "void"
	  nparams 1
	    param inout name "stm" type class_ref 825350 // Receiver
	  cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	  cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	  
	  
	  
	  
	  ncouples 1
	  key "STM generated" value ""
	  comment " to manage the event create"
	end

	operation 1140998 "_upper"
	  force_body_gen cpp_virtual public return_type class_ref 825478 // AnyState
	  nparams 1
	    param inout name "stm" type class_ref 825350 // Receiver
	  cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} * ${name}${(}${t0} &${)}${const}${volatile}${throw}${abstract};
"
	  cpp_def "${comment}${inline}${typeprefix}${type} * ${class}::${name}${(}${t0} &${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	  
	  
	  
	  
	  ncouples 1
	  key "STM generated" value ""
	  comment " returns the state containing the current"
	end
      end

      attribute 743430 "_machine_name"
	public explicit_type "string"
	cpp_decl "    ${comment}${static}${thread_local}${mutable}${volatile}${const}${type} ${name}${value};
"
	java_decl ""
	php_decl ""
	python_decl ""
	idl_decl ""
	mysql_decl ""
	MysqlColumn
	ncouples 1
	key "STM generated" value ""
	comment " a (unique) name of the machine "
      end

      attribute 743558 "_receiver_state"
	protected type class_ref 825606 // Receiver_State
	cpp_decl "    ${comment}${static}${thread_local}${mutable}${volatile}${const}${type} ${name}${value};
"
	java_decl ""
	php_decl ""
	python_decl ""
	idl_decl ""
	mysql_decl ""
	MysqlColumn
	ncouples 1
	key "STM generated" value ""
	comment " memorize the instance of the state Receiver, internal"
      end

      operation 1140230 "Receiver"
	force_body_gen public explicit_return_type ""
	nparams 0
	cpp_decl "    ${comment}${inline}${typeprefix}${name}${(}${)}${volatile}${throw};
"
	cpp_def "${comment}${inline}${typeprefix}${class}::${name}${(}${)}${volatile}${throw} {
  ${body}}
"
	
	
	
	
	ncouples 1
	key "STM generated" value ""
      end

      operation 1140358 "~Receiver"
	force_body_gen cpp_virtual public explicit_return_type ""
	nparams 0
	cpp_decl "    ${comment}${inline}${virtual}${typeprefix}${name}${(}${)}${volatile}${throw};
"
	cpp_def "${comment}${inline}${typeprefix}${class}::${name}${(}${)}${volatile}${throw} {
  ${body}}
"
	
	
	
	
	ncouples 1
	key "STM generated" value ""
      end

      operation 1140486 "create"
	force_body_gen public explicit_return_type "bool"
	nparams 0
	cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${)}${const}${volatile}${throw}${abstract};
"
	cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	
	
	
	
	ncouples 1
	key "STM generated" value ""
	comment " the operation you call to signal the event create"
      end

      classrelation 928518 // <dependency>
	relation 918278 -_->
	  stereotype "friend"
	  a public
	    cpp default "${type}"
	    classrelation_ref 928518 // <dependency>
	  b parent class_ref 825734 // Receive_State
      end

      classrelation 928646 // <dependency>
	relation 918406 -_->
	  stereotype "friend"
	  a public
	    cpp default "${type}"
	    classrelation_ref 928646 // <dependency>
	  b parent class_ref 825606 // Receiver_State
      end

      operation 1141126 "doActivity"
	force_body_gen public explicit_return_type "void"
	nparams 0
	cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${)}${const}${volatile}${throw}${abstract};
"
	cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	
	
	
	
	ncouples 1
	key "STM generated" value ""
	comment " to execute the current state 'do activity'"
      end

      operation 1141254 "_set_currentState"
	force_body_gen cpp_inline protected explicit_return_type "void"
	nparams 1
	  param inout name "st" type class_ref 825478 // AnyState
	cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	
	
	
	
	ncouples 1
	key "STM generated" value ""
	comment " change the current state, internal"
      end

      operation 1141382 "_final"
	force_body_gen protected explicit_return_type "void"
	nparams 0
	cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${)}${const}${volatile}${throw}${abstract};
"
	cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	
	
	
	
	ncouples 1
	key "STM generated" value ""
	comment " execution done, internal"
      end

      classrelation 928774 // _current_state (<directional aggregation>)
	relation 918534 o-->
	  a role_name "_current_state" protected
	    comment " contains the current state, internal"
	    cpp default "    ${comment}${static}${thread_local}${mutable}${volatile}${const}${type} * ${name}${value};
"
	    classrelation_ref 928774 // _current_state (<directional aggregation>)
	  b parent class_ref 825478 // AnyState
      end
    end
  end

  classview 287238 "Feeder"
    
    classdiagramsettings member_max_width 0 end
    
    classcompositediagramsettings end
    
    collaborationdiagramsettings end
    
    objectdiagramsettings end
    
    objectcompositediagramsettings end
    
    sequencediagramsettings end
    
    statediagramsettings
     end
    
    
    activitydiagramsettings
     end
    state 295430 "Feeder"
      stereotype "machine"
      statediagram 413190 "Bitstamp Feeder state machine"
	statediagramsettings show_trans_definition yes
	 end
	size A4
      end

      pseudostate 376326 initial ""
	transition 557574 "<transition>"
	  on pseudostate_ref 376454 // choice 
	  external 
	end
      end

      pseudostate 376454 choice ""
	transition 557702 "<transition>"
	  on pseudostate_ref 376710 // junction 
	    uml_guard "created using default constructor"
	  external 
	end

	transition 557830 "<transition>"
	  on state_ref 295558 // Busy
	    uml_guard "else"
	    cpp_guard "stm.d_"
	  external 
	end
      end

      pseudostate 376582 final ""
      end

      pseudostate 376710 junction ""
	transition 557958 "<transition>"
	  on pseudostate_ref 376582 // final 
	    uml_expr "report failure"
	    cpp_expr "if(stm.d_->fh_) stm.d_->fh_();
"
	  external 
	end
      end

      state 295558 "Busy"
	  uml_on_entry "create websocket"
	  uml_on_exit "close websocket"
	  cpp_on_entry "stm.d_->ctx_ = std::make_unique<boost::asio::ssl::context>(
    boost::asio::ssl::context::sslv23_client);
load_root_certificates(*stm.d_->ctx_);
stm.d_->resolver_ = std::make_unique<boost::asio::ip::tcp::resolver>(*stm.d_->ioc_);
stm.d_->ws_ = std::make_unique<FeederData::WebsocketStream>(*stm.d_->ioc_, *stm.d_->ctx_);

if (!SSL_set_tlsext_host_name(stm.d_->ws_->next_layer().native_handle(),
                              stm.d_->host_.c_str())) {
  boost::system::error_code ec{static_cast<int>(::ERR_get_error()),
                               boost::asio::error::get_ssl_category()};
  std::cerr << ec.message() << \"\\n\";
}
/*
SSL_CTX_set_keylog_callback(stm.d_->ctx_->native_handle(),
      [](const SSL *ssl, const char *line) {
  ofstream f{\"./key.txt\", ios_base::app };
  f << line << \"\\n\";
  f.close();
      });
*/
"
	  cpp_on_exit "stm.d_->timer_->cancel();
stm.d_->ws_->next_layer().next_layer().shutdown(boost::asio::ip::tcp::socket::shutdown_both);
stm.d_->ws_->next_layer().next_layer().cancel();
stm.d_->ws_->next_layer().next_layer().close();
"
	state 295686 "Resolve"
	    uml_on_entry "launch"
	    cpp_on_entry "stm.d_->resolver_->async_resolve(
    stm.d_->host_, stm.d_->port_,
    boost::asio::bind_executor(
        *stm.d_->strand_,
        [&stm](const boost::system::error_code &ec,
               boost::asio::ip::tcp::resolver::results_type results) {
          if (ec) {
            stm.d_->ec_ = ec;
            stm.d_->error_message_ = ec.message();
            stm.failure();
          } else {
            stm.d_->results_ = results;
            stm.success();
          }
        }));
"
	  transition 564998 "Resolved"
	    on state_ref 302470 // Connect
	      uml_trigger "success"
	      cpp_trigger "success"
	    external 
	  end
	end

	pseudostate 376838 initial ""
	  transition 558086 "<transition>"
	    on state_ref 295686 // Resolve
	    external 
	  end
	end

	state 295814 "Subscribe live_trades"
	    uml_on_entry "launch"
	    cpp_on_entry "using namespace boost::property_tree;
ptree tree, c;
std::ostringstream request;
tree.put(\"event\", \"bts:subscribe\");
c.put(\"channel\", \"live_trades_\"+ stm.d_->product_);
tree.add_child(\"data\",c); 
write_json(request, tree, false);

#ifndef NDEBUG
BOOST_LOG_TRIVIAL(debug) << \"Request: \" << request.str();
#endif
stm.d_->ws_->async_write(
    boost::asio::buffer(request.str()),
    boost::asio::bind_executor(*stm.d_->strand_,
                               [&stm](const boost::system::error_code &ec,
                                      std::size_t bytes_transferred) {
                                 boost::ignore_unused(bytes_transferred);
                                 if (ec) {
				   stm.d_->ec_ = ec;
				   stm.d_->error_message_ = ec.message();
                                   stm.failure();
				   }
                                 else
                                   stm.success();
                               }));
"
	  transition 566278 "live_trades subscribed"
	    on state_ref 302982 // Subsribe live_orders
	      uml_trigger "success"
	      cpp_trigger "success"
	    external 
	  end
	end

	state 295942 "Receive"
	    uml_on_entry "launch"
	    cpp_on_entry "stm.d_->ws_->async_read(
    stm.d_->buffer_,
    boost::asio::bind_executor(
        *stm.d_->strand_, [&stm](const boost::system::error_code &ec,
                                 std::size_t bytes_transferred) {
          boost::ignore_unused(bytes_transferred);
          if (ec) {
            stm.d_->ec_ = ec;
            stm.d_->error_message_ = ec.message();
            stm.failure();
          } else {
            using namespace boost::property_tree;
            auto local_timestamp = date::format(
                \"%FT%TZ\",
                std::chrono::time_point_cast<std::chrono::microseconds>(
                    std::chrono::system_clock::now()));
            std::stringstream m;
            m << boost::beast::buffers(stm.d_->buffer_.data());
            stm.d_->tree_ = std::make_unique<boost::property_tree::ptree>();
            boost::property_tree::read_json(m, *stm.d_->tree_);
            auto event = stm.d_->tree_->get<std::string>(\"event\");
            if (!event.compare(\"order_created\") ||
                !event.compare(\"order_changed\") ||
                !event.compare(\"order_deleted\") || !event.compare(\"trade\")) {
              stm.d_->tree_->put(\"local_timestamp\", local_timestamp);
            }
            else 
              stm.d_->tree_.reset();
            stm.d_->buffer_.consume(stm.d_->buffer_.size());
#ifndef NDEBUG
            BOOST_LOG_TRIVIAL(debug) << stm._machine_name << m.str();
#endif
            stm.success();
          }
        }));
"
	  transition 565766 "Received"
	    on state_ref 295942 // Receive
	      uml_trigger "success"
	      cpp_trigger "success"
	      cpp_expr "if(stm.d_->rh_ && stm.d_->tree_) stm.d_->rh_(std::move(stm.d_->tree_));


"
	    external 
	  end
	end

	transition 558214 "Failed"
	  on pseudostate_ref 376710 // junction 
	    uml_trigger "failure"
	    cpp_trigger "failure"
	  external 
	end

	state 302470 "Connect"
	    uml_on_entry "launch"
	    cpp_on_entry "// Make the connection on the IP address we get from a lookup
boost::asio::async_connect(
    stm.d_->ws_->next_layer().next_layer(), stm.d_->results_.begin(),
    stm.d_->results_.end(),
    boost::asio::bind_executor(*stm.d_->strand_,
                               [&stm](const boost::system::error_code &ec,
                                      decltype(stm.d_->results_.begin()) iter) {
                                 if (ec) {
                                   stm.d_->ec_ = ec;
				   stm.d_->error_message_ = ec.message();
                                   stm.failure();
                                 } else {
                                   stm.d_->address_ = iter->endpoint().address();
                                   stm.success();
                                 }
                               }));
"
	  transition 565126 "connected"
	    on state_ref 302598 // Handshake SSL
	      uml_trigger "success"
	      cpp_trigger "success"
	    external 
	  end
	end

	state 302598 "Handshake SSL"
	    uml_on_entry "launch"
	    cpp_on_entry "stm.d_->ws_->next_layer().async_handshake(
    boost::asio::ssl::stream_base::client,
    boost::asio::bind_executor(*stm.d_->strand_,
                               [&stm](const boost::system::error_code &ec) {
                                 if (ec) {
                                   stm.d_->ec_ = ec;
				   stm.d_->error_message_ = ec.message();
                                   stm.failure();
                                 } else {
                                   stm.success();
                                 }
                               }));
"
	  transition 565254 "ssl handshaked"
	    on state_ref 302726 // Handshake websocket
	      uml_trigger "success"
	      cpp_trigger "success"
	    external 
	  end
	end

	state 302726 "Handshake websocket"
	    uml_on_entry "launch"
	    cpp_on_entry "stm.d_->ws_->async_handshake(
    stm.d_->host_, stm.d_->target_,
    boost::asio::bind_executor(*stm.d_->strand_,
                               [&stm](const boost::system::error_code &ec) {
                                 if (ec) {
                                   stm.d_->ec_ = ec;
                                   stm.d_->error_message_ = ec.message();
                                   stm.failure();
                                 } else {
                                   stm.success();
                                 }
                               }));
"
	  transition 565382 "websocket handshaked"
	    on state_ref 295814 // Subscribe live_trades
	      uml_trigger "success"
	      cpp_trigger "success"
	    external 
	  end
	end

	transition 565510 "<transition>"
	  on pseudostate_ref 376710 // junction 
	  external 
	end

	transition 565894 "<transition>"
	  on state_ref 302854 // Exhausted
	    uml_trigger "exhausted"
	    cpp_trigger "exhausted"
	  external 
	end

	state 302982 "Subsribe live_orders"
	    uml_on_entry "launch"
	    cpp_on_entry "using namespace boost::property_tree;
ptree tree, c;
std::ostringstream request;
tree.put(\"event\", \"bts:subscribe\");
c.put(\"channel\", \"live_orders_\"+ stm.d_->product_);
tree.add_child(\"data\",c); 
write_json(request, tree, false);

#ifndef NDEBUG
BOOST_LOG_TRIVIAL(debug) << \"Request: \" << request.str();
#endif
stm.d_->ws_->async_write(
    boost::asio::buffer(request.str()),
    boost::asio::bind_executor(*stm.d_->strand_,
                               [&stm](const boost::system::error_code &ec,
                                      std::size_t bytes_transferred) {
                                 boost::ignore_unused(bytes_transferred);
                                 if (ec) {
				   stm.d_->ec_ = ec;
				   stm.d_->error_message_ = ec.message();
                                   stm.failure();
				   }
                                 else
                                   stm.success();
                               }));


"
	  transition 566406 "<transition>"
	    on state_ref 295942 // Receive
	      uml_trigger "success"
	      uml_expr "report subscribed, start timer"
	      cpp_trigger "success"
	      cpp_expr "if(stm.d_->sh_) stm.d_->sh_();
using boost::posix_time::seconds;
stm.d_->timer_->expires_from_now(seconds(5));
stm.d_->timer_->async_wait(boost::asio::bind_executor(
    *stm.d_->strand_, [&stm](const boost::system::error_code &ec) {
      if (ec != boost::asio::error::operation_aborted) {
        stm.exhausted();
      }
    }));
"
	    external 
	  end
	end
      end

      state 302854 "Exhausted"
	transition 566022 "<transition>"
	  on pseudostate_ref 376710 // junction 
	    uml_trigger "success"
	    cpp_trigger "success"
	  external 
	end

	transition 566150 "<transition>"
	  on pseudostate_ref 376710 // junction 
	    uml_trigger "failure"
	    cpp_trigger "failure"
	  external 
	end
      end
    end

    classdiagram 413318 "Bitstamp Feeder"
      classdiagramsettings member_max_width 0 end
      size A4
    end

    class 916486 "Feeder"
      visibility package 
      cpp_decl "${comment}${template}class ${name}${inherit} {
${members}};
${inlines}
"
      java_decl ""
      php_decl ""
      python_2_2 python_decl ""
      idl_decl ""
      explicit_switch_type ""
      mysql_decl ""
      
      ncouples 1
      key "STM generated" value ""
      comment " implement the state machine Feeder"
      class 916614 "AnyState"
	abstract visibility protected 
	cpp_decl "${comment}${template}class ${name}${inherit} {
${members}};
${inlines}
"
	java_decl ""
	php_decl ""
	python_2_2 python_decl ""
	idl_decl ""
	explicit_switch_type ""
	mysql_decl ""
	
	ncouples 1
	key "STM generated" value ""
	comment " Mother class of all the classes representing states"
	operation 1299206 "~AnyState"
	  force_body_gen cpp_virtual public explicit_return_type ""
	  nparams 0
	  cpp_decl "    ${comment}${inline}${virtual}${typeprefix}${name}${(}${)}${volatile}${throw};
"
	  cpp_def "${comment}${inline}${typeprefix}${class}::${name}${(}${)}${volatile}${throw} {
  ${body}}
"
	  
	  
	  
	  
	  ncouples 1
	  key "STM generated" value ""
	end

	operation 1299334 "_upper"
	  abstract force_body_gen cpp_virtual public return_type class_ref 916614 // AnyState
	  nparams 1
	    param inout name "stm" type class_ref 916486 // Feeder
	  cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} * ${name}${(}${t0} &${)}${const}${volatile}${throw}${abstract};
"
	  
	  
	  
	  
	  ncouples 1
	  key "STM generated" value ""
	  comment " return the upper state"
	end

	operation 1299462 "_do"
	  force_body_gen cpp_virtual public explicit_return_type "void"
	  nparams 1
	    param inout name "stm" type class_ref 916486 // Feeder
	  cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} &${)}${const}${volatile}${throw}${abstract};
"
	  cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} &${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	  
	  
	  
	  
	  ncouples 1
	  key "STM generated" value ""
	  comment " perform the 'do activity'"
	end

	operation 1299590 "_doentry"
	  force_body_gen cpp_virtual public explicit_return_type "void"
	  nparams 1
	    param inout name "stm" type class_ref 916486 // Feeder
	  cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} &${)}${const}${volatile}${throw}${abstract};
"
	  cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} &${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	  
	  
	  
	  
	  ncouples 1
	  key "STM generated" value ""
	  comment " performs the 'entry activity'"
	end

	operation 1299718 "_doexit"
	  force_body_gen cpp_virtual public explicit_return_type "void"
	  nparams 1
	    param inout name "stm" type class_ref 916486 // Feeder
	  cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} &${)}${const}${volatile}${throw}${abstract};
"
	  cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} &${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	  
	  
	  
	  
	  ncouples 1
	  key "STM generated" value ""
	  comment " performs the 'exit activity'"
	end

	operation 1300486 "create"
	  force_body_gen cpp_virtual public explicit_return_type "void"
	  nparams 1
	    param inout name "stm" type class_ref 916486 // Feeder
	  cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} &${)}${const}${volatile}${throw}${abstract};
"
	  cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} &${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	  
	  
	  
	  
	  ncouples 1
	  key "STM generated" value ""
	end

	operation 1315462 "success"
	  force_body_gen cpp_virtual public explicit_return_type "void"
	  nparams 1
	    param inout name "stm" type class_ref 916486 // Feeder
	  cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	  cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	  
	  
	  
	  
	  ncouples 1
	  key "STM generated" value ""
	  comment " the current state doesn't manage the event success, give it to the upper state"
	end

	operation 1317126 "failure"
	  force_body_gen cpp_virtual public explicit_return_type "void"
	  nparams 1
	    param inout name "stm" type class_ref 916486 // Feeder
	  cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	  cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	  
	  
	  
	  
	  ncouples 1
	  key "STM generated" value ""
	  comment " the current state doesn't manage the event failure, give it to the upper state"
	end

	operation 1320198 "exhausted"
	  force_body_gen cpp_virtual public explicit_return_type "void"
	  nparams 1
	    param inout name "stm" type class_ref 916486 // Feeder
	  cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	  cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	  
	  
	  
	  
	  ncouples 1
	  key "STM generated" value ""
	  comment " the current state doesn't manage the event exhausted, give it to the upper state"
	end
      end

      class 916742 "Feeder_State"
	visibility protected 
	cpp_decl "${comment}${template}class ${name}${inherit} {
${members}};
${inlines}
"
	java_decl ""
	php_decl ""
	python_2_2 python_decl ""
	idl_decl ""
	explicit_switch_type ""
	mysql_decl ""
	
	ncouples 1
	key "STM generated" value ""
	comment " implement the state Feeder"
	class 916870 "Busy_State"
	  visibility public 
	  cpp_decl "${comment}${template}class ${name}${inherit} {
${members}};
${inlines}
"
	  java_decl ""
	  php_decl ""
	  python_2_2 python_decl ""
	  idl_decl ""
	  explicit_switch_type ""
	  mysql_decl ""
	  
	  ncouples 1
	  key "STM generated" value ""
	  comment " implement the state Busy"
	  class 923398 "Resolve_State"
	    visibility public 
	    cpp_decl "${comment}${template}class ${name}${inherit} {
${members}};
${inlines}
"
	    java_decl ""
	    php_decl ""
	    python_2_2 python_decl ""
	    idl_decl ""
	    explicit_switch_type ""
	    mysql_decl ""
	    
	    ncouples 1
	    key "STM generated" value ""
	    comment " implement the state Resolve"
	    operation 1314566 "~Resolve_State"
	      force_body_gen cpp_virtual public explicit_return_type ""
	      nparams 0
	      cpp_decl "    ${comment}${inline}${virtual}${typeprefix}${name}${(}${)}${volatile}${throw};
"
	      cpp_def "${comment}${inline}${typeprefix}${class}::${name}${(}${)}${volatile}${throw} {
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	    end

	    classrelation 1049094 // <generalisation>
	      relation 1038726 ---|>
		a public
		  cpp default "${type}"
		  classrelation_ref 1049094 // <generalisation>
		b parent class_ref 916614 // AnyState
	    end

	    operation 1315590 "success"
	      force_body_gen cpp_virtual public explicit_return_type "void"
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " to manage the event success"
	    end

	    operation 1315718 "create"
	      force_body_gen cpp_virtual public explicit_return_type "void"
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " to manage the event create"
	    end

	    operation 1315846 "_doentry"
	      force_body_gen public explicit_return_type "void"
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " perform the 'entry behavior'"
	    end

	    operation 1315974 "_upper"
	      force_body_gen cpp_virtual public return_type class_ref 916614 // AnyState
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} * ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} * ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " returns the state containing the current"
	    end
	  end

	  class 924422 "Subsribe_live_orders_State"
	    visibility public 
	    cpp_decl "${comment}${template}class ${name}${inherit} {
${members}};
${inlines}
"
	    java_decl ""
	    php_decl ""
	    python_2_2 python_decl ""
	    idl_decl ""
	    explicit_switch_type ""
	    mysql_decl ""
	    
	    ncouples 1
	    key "STM generated" value ""
	    comment " implement the state Subsribe live_orders"
	    operation 1320966 "~Subsribe_live_orders_State"
	      force_body_gen cpp_virtual public explicit_return_type ""
	      nparams 0
	      cpp_decl "    ${comment}${inline}${virtual}${typeprefix}${name}${(}${)}${volatile}${throw};
"
	      cpp_def "${comment}${inline}${typeprefix}${class}::${name}${(}${)}${volatile}${throw} {
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	    end

	    classrelation 1051142 // <generalisation>
	      relation 1040774 ---|>
		a public
		  cpp default "${type}"
		  classrelation_ref 1051142 // <generalisation>
		b parent class_ref 916614 // AnyState
	    end

	    operation 1321606 "success"
	      force_body_gen cpp_virtual public explicit_return_type "void"
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " to manage the event success"
	    end

	    operation 1321734 "create"
	      force_body_gen cpp_virtual public explicit_return_type "void"
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " to manage the event create"
	    end

	    operation 1321862 "_doentry"
	      force_body_gen public explicit_return_type "void"
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " perform the 'entry behavior'"
	    end

	    operation 1321990 "_upper"
	      force_body_gen cpp_virtual public return_type class_ref 916614 // AnyState
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} * ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} * ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " returns the state containing the current"
	    end
	  end

	  class 924038 "Handshake_websocket_State"
	    visibility public 
	    cpp_decl "${comment}${template}class ${name}${inherit} {
${members}};
${inlines}
"
	    java_decl ""
	    php_decl ""
	    python_2_2 python_decl ""
	    idl_decl ""
	    explicit_switch_type ""
	    mysql_decl ""
	    
	    ncouples 1
	    key "STM generated" value ""
	    comment " implement the state Handshake websocket"
	    operation 1315206 "~Handshake_websocket_State"
	      force_body_gen cpp_virtual public explicit_return_type ""
	      nparams 0
	      cpp_decl "    ${comment}${inline}${virtual}${typeprefix}${name}${(}${)}${volatile}${throw};
"
	      cpp_def "${comment}${inline}${typeprefix}${class}::${name}${(}${)}${volatile}${throw} {
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	    end

	    classrelation 1050374 // <generalisation>
	      relation 1040006 ---|>
		a public
		  cpp default "${type}"
		  classrelation_ref 1050374 // <generalisation>
		b parent class_ref 916614 // AnyState
	    end

	    operation 1318406 "success"
	      force_body_gen cpp_virtual public explicit_return_type "void"
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " to manage the event success"
	    end

	    operation 1318534 "create"
	      force_body_gen cpp_virtual public explicit_return_type "void"
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " to manage the event create"
	    end

	    operation 1318662 "_doentry"
	      force_body_gen public explicit_return_type "void"
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " perform the 'entry behavior'"
	    end

	    operation 1318790 "_upper"
	      force_body_gen cpp_virtual public return_type class_ref 916614 // AnyState
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} * ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} * ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " returns the state containing the current"
	    end
	  end

	  class 923910 "Handshake_SSL_State"
	    visibility public 
	    cpp_decl "${comment}${template}class ${name}${inherit} {
${members}};
${inlines}
"
	    java_decl ""
	    php_decl ""
	    python_2_2 python_decl ""
	    idl_decl ""
	    explicit_switch_type ""
	    mysql_decl ""
	    
	    ncouples 1
	    key "STM generated" value ""
	    comment " implement the state Handshake SSL"
	    operation 1315078 "~Handshake_SSL_State"
	      force_body_gen cpp_virtual public explicit_return_type ""
	      nparams 0
	      cpp_decl "    ${comment}${inline}${virtual}${typeprefix}${name}${(}${)}${volatile}${throw};
"
	      cpp_def "${comment}${inline}${typeprefix}${class}::${name}${(}${)}${volatile}${throw} {
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	    end

	    classrelation 1050118 // <generalisation>
	      relation 1039750 ---|>
		a public
		  cpp default "${type}"
		  classrelation_ref 1050118 // <generalisation>
		b parent class_ref 916614 // AnyState
	    end

	    operation 1317894 "success"
	      force_body_gen cpp_virtual public explicit_return_type "void"
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " to manage the event success"
	    end

	    operation 1318022 "create"
	      force_body_gen cpp_virtual public explicit_return_type "void"
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " to manage the event create"
	    end

	    operation 1318150 "_doentry"
	      force_body_gen public explicit_return_type "void"
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " perform the 'entry behavior'"
	    end

	    operation 1318278 "_upper"
	      force_body_gen cpp_virtual public return_type class_ref 916614 // AnyState
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} * ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} * ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " returns the state containing the current"
	    end
	  end

	  class 923782 "Connect_State"
	    visibility public 
	    cpp_decl "${comment}${template}class ${name}${inherit} {
${members}};
${inlines}
"
	    java_decl ""
	    php_decl ""
	    python_2_2 python_decl ""
	    idl_decl ""
	    explicit_switch_type ""
	    mysql_decl ""
	    
	    ncouples 1
	    key "STM generated" value ""
	    comment " implement the state Connect"
	    operation 1314950 "~Connect_State"
	      force_body_gen cpp_virtual public explicit_return_type ""
	      nparams 0
	      cpp_decl "    ${comment}${inline}${virtual}${typeprefix}${name}${(}${)}${volatile}${throw};
"
	      cpp_def "${comment}${inline}${typeprefix}${class}::${name}${(}${)}${volatile}${throw} {
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	    end

	    classrelation 1049862 // <generalisation>
	      relation 1039494 ---|>
		a public
		  cpp default "${type}"
		  classrelation_ref 1049862 // <generalisation>
		b parent class_ref 916614 // AnyState
	    end

	    operation 1317382 "success"
	      force_body_gen cpp_virtual public explicit_return_type "void"
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " to manage the event success"
	    end

	    operation 1317510 "create"
	      force_body_gen cpp_virtual public explicit_return_type "void"
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " to manage the event create"
	    end

	    operation 1317638 "_doentry"
	      force_body_gen public explicit_return_type "void"
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " perform the 'entry behavior'"
	    end

	    operation 1317766 "_upper"
	      force_body_gen cpp_virtual public return_type class_ref 916614 // AnyState
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} * ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} * ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " returns the state containing the current"
	    end
	  end

	  class 923654 "Receive_State"
	    visibility public 
	    cpp_decl "${comment}${template}class ${name}${inherit} {
${members}};
${inlines}
"
	    java_decl ""
	    php_decl ""
	    python_2_2 python_decl ""
	    idl_decl ""
	    explicit_switch_type ""
	    mysql_decl ""
	    
	    ncouples 1
	    key "STM generated" value ""
	    comment " implement the state Receive"
	    operation 1314822 "~Receive_State"
	      force_body_gen cpp_virtual public explicit_return_type ""
	      nparams 0
	      cpp_decl "    ${comment}${inline}${virtual}${typeprefix}${name}${(}${)}${volatile}${throw};
"
	      cpp_def "${comment}${inline}${typeprefix}${class}::${name}${(}${)}${volatile}${throw} {
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	    end

	    classrelation 1049606 // <generalisation>
	      relation 1039238 ---|>
		a public
		  cpp default "${type}"
		  classrelation_ref 1049606 // <generalisation>
		b parent class_ref 916614 // AnyState
	    end

	    operation 1316870 "_upper"
	      force_body_gen cpp_virtual public return_type class_ref 916614 // AnyState
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} * ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} * ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " returns the state containing the current"
	    end

	    operation 1319686 "success"
	      force_body_gen cpp_virtual public explicit_return_type "void"
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " to manage the event success"
	    end

	    operation 1319814 "create"
	      force_body_gen cpp_virtual public explicit_return_type "void"
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " to manage the event create"
	    end

	    operation 1319942 "_doentry"
	      force_body_gen public explicit_return_type "void"
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " perform the 'entry behavior'"
	    end
	  end

	  class 924294 "Subscribe_live_trades_State"
	    visibility public 
	    cpp_decl "${comment}${template}class ${name}${inherit} {
${members}};
${inlines}
"
	    java_decl ""
	    php_decl ""
	    python_2_2 python_decl ""
	    idl_decl ""
	    explicit_switch_type ""
	    mysql_decl ""
	    
	    ncouples 1
	    key "STM generated" value ""
	    comment " implement the state Subscribe live_trades"
	    operation 1320838 "~Subscribe_live_trades_State"
	      force_body_gen cpp_virtual public explicit_return_type ""
	      nparams 0
	      cpp_decl "    ${comment}${inline}${virtual}${typeprefix}${name}${(}${)}${volatile}${throw};
"
	      cpp_def "${comment}${inline}${typeprefix}${class}::${name}${(}${)}${volatile}${throw} {
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	    end

	    classrelation 1050886 // <generalisation>
	      relation 1040518 ---|>
		a public
		  cpp default "${type}"
		  classrelation_ref 1050886 // <generalisation>
		b parent class_ref 916614 // AnyState
	    end

	    operation 1321094 "success"
	      force_body_gen cpp_virtual public explicit_return_type "void"
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " to manage the event success"
	    end

	    operation 1321222 "create"
	      force_body_gen cpp_virtual public explicit_return_type "void"
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " to manage the event create"
	    end

	    operation 1321350 "_doentry"
	      force_body_gen public explicit_return_type "void"
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " perform the 'entry behavior'"
	    end

	    operation 1321478 "_upper"
	      force_body_gen cpp_virtual public return_type class_ref 916614 // AnyState
	      nparams 1
	        param inout name "stm" type class_ref 916486 // Feeder
	      cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} * ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	      cpp_def "${comment}${inline}${typeprefix}${type} * ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	      
	      
	      
	      
	      ncouples 1
	      key "STM generated" value ""
	      comment " returns the state containing the current"
	    end
	  end

	  operation 1299974 "~Busy_State"
	    force_body_gen cpp_virtual public explicit_return_type ""
	    nparams 0
	    cpp_decl "    ${comment}${inline}${virtual}${typeprefix}${name}${(}${)}${volatile}${throw};
"
	    cpp_def "${comment}${inline}${typeprefix}${class}::${name}${(}${)}${volatile}${throw} {
  ${body}}
"
	    
	    
	    
	    
	    ncouples 1
	    key "STM generated" value ""
	  end

	  classrelation 1041798 // <generalisation>
	    relation 1031430 ---|>
	      a public
		cpp default "${type}"
		classrelation_ref 1041798 // <generalisation>
	      b parent class_ref 916614 // AnyState
	  end

	  operation 1300870 "_upper"
	    force_body_gen cpp_virtual public return_type class_ref 916614 // AnyState
	    nparams 1
	      param inout name "stm" type class_ref 916486 // Feeder
	    cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} * ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	    cpp_def "${comment}${inline}${typeprefix}${type} * ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	    
	    
	    
	    
	    ncouples 1
	    key "STM generated" value ""
	    comment " returns the state containing the current"
	  end

	  attribute 833414 "_resolve_state"
	    public type class_ref 923398 // Resolve_State
	    cpp_decl "    ${comment}${static}${thread_local}${mutable}${volatile}${const}${type} ${name}${value};
"
	    java_decl ""
	    php_decl ""
	    python_decl ""
	    idl_decl ""
	    mysql_decl ""
	    MysqlColumn
	    ncouples 1
	    key "STM generated" value ""
	    comment " memorize the instance of the state Resolve, internal"
	  end

	  attribute 833670 "_receive_state"
	    public type class_ref 923654 // Receive_State
	    cpp_decl "    ${comment}${static}${thread_local}${mutable}${volatile}${const}${type} ${name}${value};
"
	    java_decl ""
	    php_decl ""
	    python_decl ""
	    idl_decl ""
	    mysql_decl ""
	    MysqlColumn
	    ncouples 1
	    key "STM generated" value ""
	    comment " memorize the instance of the state Receive, internal"
	  end

	  attribute 833798 "_connect_state"
	    public type class_ref 923782 // Connect_State
	    cpp_decl "    ${comment}${static}${thread_local}${mutable}${volatile}${const}${type} ${name}${value};
"
	    java_decl ""
	    php_decl ""
	    python_decl ""
	    idl_decl ""
	    mysql_decl ""
	    MysqlColumn
	    ncouples 1
	    key "STM generated" value ""
	    comment " memorize the instance of the state Connect, internal"
	  end

	  attribute 833926 "_handshake_ssl_state"
	    public type class_ref 923910 // Handshake_SSL_State
	    cpp_decl "    ${comment}${static}${thread_local}${mutable}${volatile}${const}${type} ${name}${value};
"
	    java_decl ""
	    php_decl ""
	    python_decl ""
	    idl_decl ""
	    mysql_decl ""
	    MysqlColumn
	    ncouples 1
	    key "STM generated" value ""
	    comment " memorize the instance of the state Handshake SSL, internal"
	  end

	  attribute 834054 "_handshake_websocket_state"
	    public type class_ref 924038 // Handshake_websocket_State
	    cpp_decl "    ${comment}${static}${thread_local}${mutable}${volatile}${const}${type} ${name}${value};
"
	    java_decl ""
	    php_decl ""
	    python_decl ""
	    idl_decl ""
	    mysql_decl ""
	    MysqlColumn
	    ncouples 1
	    key "STM generated" value ""
	    comment " memorize the instance of the state Handshake websocket, internal"
	  end

	  operation 1316102 "create"
	    force_body_gen cpp_virtual public explicit_return_type "void"
	    nparams 1
	      param inout name "stm" type class_ref 916486 // Feeder
	    cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	    cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	    
	    
	    
	    
	    ncouples 1
	    key "STM generated" value ""
	    comment " to manage the event create"
	  end

	  operation 1317254 "failure"
	    force_body_gen cpp_virtual public explicit_return_type "void"
	    nparams 1
	      param inout name "stm" type class_ref 916486 // Feeder
	    cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	    cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	    
	    
	    
	    
	    ncouples 1
	    key "STM generated" value ""
	    comment " to manage the event failure"
	  end

	  operation 1318918 "_completion"
	    force_body_gen cpp_virtual public explicit_return_type "bool"
	    nparams 1
	      param inout name "stm" type class_ref 916486 // Feeder
	    cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	    cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	    
	    
	    
	    
	    ncouples 1
	    key "STM generated" value ""
	  end

	  operation 1319046 "_doentry"
	    force_body_gen public explicit_return_type "void"
	    nparams 1
	      param inout name "stm" type class_ref 916486 // Feeder
	    cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	    cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	    
	    
	    
	    
	    ncouples 1
	    key "STM generated" value ""
	    comment " perform the 'entry behavior'"
	  end

	  operation 1319174 "_doexit"
	    force_body_gen public explicit_return_type "void"
	    nparams 1
	      param inout name "stm" type class_ref 916486 // Feeder
	    cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	    cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	    
	    
	    
	    
	    ncouples 1
	    key "STM generated" value ""
	    comment " perform the 'exit behavior'"
	  end

	  operation 1320326 "exhausted"
	    force_body_gen cpp_virtual public explicit_return_type "void"
	    nparams 1
	      param inout name "stm" type class_ref 916486 // Feeder
	    cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	    cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	    
	    
	    
	    
	    ncouples 1
	    key "STM generated" value ""
	    comment " to manage the event exhausted"
	  end

	  attribute 834310 "_subscribe_live_trades_state"
	    public type class_ref 924294 // Subscribe_live_trades_State
	    cpp_decl "    ${comment}${static}${thread_local}${mutable}${volatile}${const}${type} ${name}${value};
"
	    java_decl ""
	    php_decl ""
	    python_decl ""
	    idl_decl ""
	    mysql_decl ""
	    MysqlColumn
	    ncouples 1
	    key "STM generated" value ""
	    comment " memorize the instance of the state Subscribe live_trades, internal"
	  end

	  attribute 834438 "_subsribe_live_orders_state"
	    public type class_ref 924422 // Subsribe_live_orders_State
	    cpp_decl "    ${comment}${static}${thread_local}${mutable}${volatile}${const}${type} ${name}${value};
"
	    java_decl ""
	    php_decl ""
	    python_decl ""
	    idl_decl ""
	    mysql_decl ""
	    MysqlColumn
	    ncouples 1
	    key "STM generated" value ""
	    comment " memorize the instance of the state Subsribe live_orders, internal"
	  end
	end

	class 924166 "Exhausted_State"
	  visibility public 
	  cpp_decl "${comment}${template}class ${name}${inherit} {
${members}};
${inlines}
"
	  java_decl ""
	  php_decl ""
	  python_2_2 python_decl ""
	  idl_decl ""
	  explicit_switch_type ""
	  mysql_decl ""
	  
	  ncouples 1
	  key "STM generated" value ""
	  comment " implement the state Exhausted"
	  operation 1319558 "~Exhausted_State"
	    force_body_gen cpp_virtual public explicit_return_type ""
	    nparams 0
	    cpp_decl "    ${comment}${inline}${virtual}${typeprefix}${name}${(}${)}${volatile}${throw};
"
	    cpp_def "${comment}${inline}${typeprefix}${class}::${name}${(}${)}${volatile}${throw} {
  ${body}}
"
	    
	    
	    
	    
	    ncouples 1
	    key "STM generated" value ""
	  end

	  classrelation 1050630 // <generalisation>
	    relation 1040262 ---|>
	      a public
		cpp default "${type}"
		classrelation_ref 1050630 // <generalisation>
	      b parent class_ref 916614 // AnyState
	  end

	  operation 1320454 "success"
	    force_body_gen cpp_virtual public explicit_return_type "void"
	    nparams 1
	      param inout name "stm" type class_ref 916486 // Feeder
	    cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	    cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	    
	    
	    
	    
	    ncouples 1
	    key "STM generated" value ""
	    comment " to manage the event success"
	  end

	  operation 1320582 "failure"
	    force_body_gen cpp_virtual public explicit_return_type "void"
	    nparams 1
	      param inout name "stm" type class_ref 916486 // Feeder
	    cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	    cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	    
	    
	    
	    
	    ncouples 1
	    key "STM generated" value ""
	    comment " to manage the event failure"
	  end

	  operation 1320710 "_upper"
	    force_body_gen cpp_virtual public return_type class_ref 916614 // AnyState
	    nparams 1
	      param inout name "stm" type class_ref 916486 // Feeder
	    cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} * ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	    cpp_def "${comment}${inline}${typeprefix}${type} * ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	    
	    
	    
	    
	    ncouples 1
	    key "STM generated" value ""
	    comment " returns the state containing the current"
	  end
	end

	operation 1299846 "~Feeder_State"
	  force_body_gen cpp_virtual public explicit_return_type ""
	  nparams 0
	  cpp_decl "    ${comment}${inline}${virtual}${typeprefix}${name}${(}${)}${volatile}${throw};
"
	  cpp_def "${comment}${inline}${typeprefix}${class}::${name}${(}${)}${volatile}${throw} {
  ${body}}
"
	  
	  
	  
	  
	  ncouples 1
	  key "STM generated" value ""
	end

	attribute 826886 "_busy_state"
	  public type class_ref 916870 // Busy_State
	  cpp_decl "    ${comment}${static}${thread_local}${mutable}${volatile}${const}${type} ${name}${value};
"
	  java_decl ""
	  php_decl ""
	  python_decl ""
	  idl_decl ""
	  mysql_decl ""
	  MysqlColumn
	  ncouples 1
	  key "STM generated" value ""
	  comment " memorize the instance of the state Busy, internal"
	end

	classrelation 1041670 // <generalisation>
	  relation 1031302 ---|>
	    a public
	      cpp default "${type}"
	      classrelation_ref 1041670 // <generalisation>
	    b parent class_ref 916614 // AnyState
	end

	operation 1300614 "create"
	  force_body_gen cpp_virtual public explicit_return_type "void"
	  nparams 1
	    param inout name "stm" type class_ref 916486 // Feeder
	  cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	  cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	  
	  
	  
	  
	  ncouples 1
	  key "STM generated" value ""
	  comment " to manage the event create"
	end

	operation 1300742 "_junction1"
	  force_body_gen public explicit_return_type "void"
	  nparams 1
	    param inout name "stm" type class_ref 916486 // Feeder
	  cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	  cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	  
	  
	  
	  
	  ncouples 1
	  key "STM generated" value ""
	  comment " implement a junction, through an operation because shared, internal"
	end

	operation 1300998 "_upper"
	  force_body_gen cpp_virtual public return_type class_ref 916614 // AnyState
	  nparams 1
	    param inout name "stm" type class_ref 916486 // Feeder
	  cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} * ${name}${(}${t0} &${)}${const}${volatile}${throw}${abstract};
"
	  cpp_def "${comment}${inline}${typeprefix}${type} * ${class}::${name}${(}${t0} &${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	  
	  
	  
	  
	  ncouples 1
	  key "STM generated" value ""
	  comment " returns the state containing the current"
	end

	attribute 834182 "_exhausted_state"
	  public type class_ref 924166 // Exhausted_State
	  cpp_decl "    ${comment}${static}${thread_local}${mutable}${volatile}${const}${type} ${name}${value};
"
	  java_decl ""
	  php_decl ""
	  python_decl ""
	  idl_decl ""
	  mysql_decl ""
	  MysqlColumn
	  ncouples 1
	  key "STM generated" value ""
	  comment " memorize the instance of the state Exhausted, internal"
	end
      end

      attribute 826630 "_machine_name"
	public explicit_type "string"
	cpp_decl "    ${comment}${static}${thread_local}${mutable}${volatile}${const}${type} ${name}${value};
"
	java_decl ""
	php_decl ""
	python_decl ""
	idl_decl ""
	mysql_decl ""
	MysqlColumn
	ncouples 1
	key "STM generated" value ""
	comment " a (unique) name of the machine "
      end

      attribute 826758 "_feeder_state"
	protected type class_ref 916742 // Feeder_State
	cpp_decl "    ${comment}${static}${thread_local}${mutable}${volatile}${const}${type} ${name}${value};
"
	java_decl ""
	php_decl ""
	python_decl ""
	idl_decl ""
	mysql_decl ""
	MysqlColumn
	ncouples 1
	key "STM generated" value ""
	comment " memorize the instance of the state Feeder, internal"
      end

      operation 1300102 "Feeder"
	force_body_gen public explicit_return_type ""
	nparams 0
	cpp_decl "    ${comment}${inline}${typeprefix}${name}${(}${)}${volatile}${throw};
"
	cpp_def "${comment}${inline}${typeprefix}${class}::${name}${(}${)}${volatile}${throw} {
  ${body}}
"
	
	
	
	
	ncouples 1
	key "STM generated" value ""
      end

      operation 1319430 "Feeder"
	public explicit_return_type ""
	nparams 2
	  param inout name "ioc" type class_ref 698758 // io_context
	  param in name "product" explicit_type "string"
	cpp_decl "    ${comment}${inline}${typeprefix}${name}${(} std::shared_ptr<${t0}> & ${p0}${v0}, const ${t1} & ${p1}${v1}${)}${volatile}${throw};
"
	cpp_def "${comment}${inline}${typeprefix}${class}::${name}${(}std::shared_ptr<${t0}> & ${p0}, const ${t1} & ${p1}${)}${volatile}${throw} : d_{std::make_unique<FeederData>(\"ws.bitstamp.net\", \"443\", \"/\")} {
  ${body}}
"
	
	
	
	
      end

      operation 1300230 "~Feeder"
	force_body_gen cpp_virtual public explicit_return_type ""
	nparams 0
	cpp_decl "    ${comment}${inline}${virtual}${typeprefix}${name}${(}${)}${volatile}${throw};
"
	cpp_def "${comment}${inline}${typeprefix}${class}::${name}${(}${)}${volatile}${throw} {
  ${body}}
"
	
	
	
	
	ncouples 1
	key "STM generated" value ""
      end

      operation 1300358 "create"
	force_body_gen public explicit_return_type "bool"
	nparams 0
	cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${)}${const}${volatile}${throw}${abstract};
"
	cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	
	
	
	
	ncouples 1
	key "STM generated" value ""
	comment " the operation you call to signal the event create"
      end

      classrelation 1041926 // <dependency>
	relation 1031558 -_->
	  stereotype "friend"
	  a public
	    cpp default "${type}"
	    classrelation_ref 1041926 // <dependency>
	  b parent class_ref 916870 // Busy_State
      end

      classrelation 1042054 // <dependency>
	relation 1031686 -_->
	  stereotype "friend"
	  a public
	    cpp default "${type}"
	    classrelation_ref 1042054 // <dependency>
	  b parent class_ref 916742 // Feeder_State
      end

      operation 1301126 "doActivity"
	force_body_gen public explicit_return_type "void"
	nparams 0
	cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${)}${const}${volatile}${throw}${abstract};
"
	cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	
	
	
	
	ncouples 1
	key "STM generated" value ""
	comment " to execute the current state 'do activity'"
      end

      operation 1301254 "_set_currentState"
	force_body_gen cpp_inline protected explicit_return_type "void"
	nparams 1
	  param inout name "st" type class_ref 916614 // AnyState
	cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${abstract};
"
	cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${t0} & ${p0}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	
	
	
	
	ncouples 1
	key "STM generated" value ""
	comment " change the current state, internal"
      end

      operation 1301382 "_final"
	force_body_gen protected explicit_return_type "void"
	nparams 0
	cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${)}${const}${volatile}${throw}${abstract};
"
	cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	
	
	
	
	ncouples 1
	key "STM generated" value ""
	comment " execution done, internal"
      end

      classrelation 1042182 // _current_state (<directional aggregation>)
	relation 1031814 o-->
	  a role_name "_current_state" protected
	    comment " contains the current state, internal"
	    cpp default "    ${comment}${static}${thread_local}${mutable}${volatile}${const}${type} * ${name}${value};
"
	    classrelation_ref 1042182 // _current_state (<directional aggregation>)
	  b parent class_ref 916614 // AnyState
      end

      classrelation 1042566 // d_ (<directional aggregation>)
	relation 1032198 o-->
	  stereotype "unique_ptr"
	  a role_name "d_" private
	    cpp default "    ${comment}${static}${thread_local}${mutable}${volatile}${stereotype}<${const}${type}> ${name}${value};
"
	    classrelation_ref 1042566 // d_ (<directional aggregation>)
	  b parent class_ref 876038 // FeederData
      end

      operation 1315334 "success"
	force_body_gen public explicit_return_type "bool"
	nparams 0
	cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${)}${const}${volatile}${throw}${abstract};
"
	cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	
	
	
	
	ncouples 1
	key "STM generated" value ""
	comment " the operation you call to signal the event success"
      end

      classrelation 1049222 // <dependency>
	relation 1038854 -_->
	  stereotype "friend"
	  a public
	    cpp default "${type}"
	    classrelation_ref 1049222 // <dependency>
	  b parent class_ref 923398 // Resolve_State
      end

      classrelation 1049734 // <dependency>
	relation 1039366 -_->
	  stereotype "friend"
	  a public
	    cpp default "${type}"
	    classrelation_ref 1049734 // <dependency>
	  b parent class_ref 923654 // Receive_State
      end

      operation 1316998 "failure"
	force_body_gen public explicit_return_type "bool"
	nparams 0
	cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${)}${const}${volatile}${throw}${abstract};
"
	cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	
	
	
	
	ncouples 1
	key "STM generated" value ""
	comment " the operation you call to signal the event failure"
      end

      operation 1319302 "registerHandlers"
	public explicit_return_type "void"
	nparams 3
	  param in name "s" type class_ref 868102 // SuccessHandler
	  param in name "f" type class_ref 867974 // FailureHandler
	  param in name "r" type class_ref 867846 // ReceivedHandler
	cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}const ${t0} & ${p0}${v0}, const ${t1} & ${p1}${v1}, const ${t2} & ${p2}${v2}${)}${const}${volatile}${throw}${abstract};
"
	cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}const ${t0} & ${p0}, const ${t1} & ${p1}, const ${t2} & ${p2}${)}${const}${throw}${staticnl}{
  ${body}}
"
	
	
	
	
      end

      classrelation 1049990 // <dependency>
	relation 1039622 -_->
	  stereotype "friend"
	  a public
	    cpp default "${type}"
	    classrelation_ref 1049990 // <dependency>
	  b parent class_ref 923782 // Connect_State
      end

      classrelation 1050246 // <dependency>
	relation 1039878 -_->
	  stereotype "friend"
	  a public
	    cpp default "${type}"
	    classrelation_ref 1050246 // <dependency>
	  b parent class_ref 923910 // Handshake_SSL_State
      end

      classrelation 1050502 // <dependency>
	relation 1040134 -_->
	  stereotype "friend"
	  a public
	    cpp default "${type}"
	    classrelation_ref 1050502 // <dependency>
	  b parent class_ref 924038 // Handshake_websocket_State
      end

      operation 1320070 "exhausted"
	force_body_gen public explicit_return_type "bool"
	nparams 0
	cpp_decl "    ${comment}${friend}${static}${inline}${virtual}${typeprefix}${type} ${name}${(}${)}${const}${volatile}${throw}${abstract};
"
	cpp_def "${comment}${inline}${typeprefix}${type} ${class}::${name}${(}${)}${const}${volatile}${throw}${staticnl}{
  ${body}}
"
	
	
	
	
	ncouples 1
	key "STM generated" value ""
	comment " the operation you call to signal the event exhausted"
      end

      classrelation 1050758 // <dependency>
	relation 1040390 -_->
	  stereotype "friend"
	  a public
	    cpp default "${type}"
	    classrelation_ref 1050758 // <dependency>
	  b parent class_ref 924166 // Exhausted_State
      end

      classrelation 1051014 // <dependency>
	relation 1040646 -_->
	  stereotype "friend"
	  a public
	    cpp default "${type}"
	    classrelation_ref 1051014 // <dependency>
	  b parent class_ref 924294 // Subscribe_live_trades_State
      end

      classrelation 1051270 // <dependency>
	relation 1040902 -_->
	  stereotype "friend"
	  a public
	    cpp default "${type}"
	    classrelation_ref 1051270 // <dependency>
	  b parent class_ref 924422 // Subsribe_live_orders_State
      end
    end
  end

  deploymentview 180486 "Source files"
    //deployment diagram settings
    deploymentdiagramsettings
     end
    artifact 273414 "Receiver"
      stereotype "source"
      cpp_h "#ifndef ${NAMESPACE}_${NAME}_H
#define ${NAMESPACE}_${NAME}_H

${comment}
${includes}
${declarations}
${namespace_start}
${definition}
${namespace_end}
#endif
"
      cpp_src "${comment}
#include <boost/log/trivial.hpp>
${includes}
${namespace_start}
${members}
${namespace_end}"
      associated_elems
	class_ref 825350 // Receiver
      end
    end

    artifact 313734 "Feeder"
      stereotype "source"
      cpp_h "#ifndef ${NAMESPACE}_${NAME}_H
#define ${NAMESPACE}_${NAME}_H

${comment}
${includes}
${declarations}
${namespace_start}
${definition}
${namespace_end}
#endif
"
      cpp_src "${comment}
#include <boost/asio/bind_executor.hpp>
#include <boost/asio/connect.hpp>
#include \"../root_certificates.h\"
#include \"../../date.h\"
#include <boost/property_tree/json_parser.hpp>
#include <boost/log/trivial.hpp>
${includes}
${namespace_start}
${members}
${namespace_end}"
      associated_elems
	class_ref 916486 // Feeder
      end
    end
  end

end
